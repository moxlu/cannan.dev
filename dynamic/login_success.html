<div class="toolbar">
	<button class="button-toolbar" onclick="showSection('noticeboard')">Noticeboard</button>
	<button class="button-toolbar" onclick="showSection('challenges')">Challenges</button>
	<button class="button-toolbar" onclick="showSection('scoreboard')">Scoreboard</button>
</div>
<!------------------------------------------------->
<div id="noticeboard" class="section">
	{{range .Notices}}
        <div class="notice">{{.Notice_title}}{{.Notice_content}}</div>
        {{else}}
        <h2>No notices found.</h2>
    {{end}}
</div>
<!------------------------------------------------->
<div id="challenges" class="section" style="display: none;">
	<h1>This Week's Featured Challenges</h1>
	<p>New challenges appear every Thursday Evening.</p>
	<div class="card-grid">
		{{range .Challenges}}
		<div class="card"
			hx-get="/challenge/{{.Challenge_id}}"
			hx-target="#challenge-details"
     		hx-swap="innerHTML"
			hx-on::after-on-load="openModal()">
			<h3>{{.Challenge_title}}</h3>
			<p>{{.Challenge_points}} points</p>
		</div>
		{{end}}
	</div>
	<h1>Other Challenges</h1>
	<div class="card-grid">
		{{range .Challenges}}
		<div class="card"
			hx-get="/challenge/{{.Challenge_id}}"
			hx-target="#challenge-details"
     		hx-swap="innerHTML"
			hx-on::after-on-load="openModal()">
			<h3>{{.Challenge_title}}</h3>
			<p>{{.Challenge_points}} points</p>
		</div>
		{{end}}
	</div>
	<div id="challenge-modal" class="modal" style="display:none;">
		<div class="modal-content">
			<span class="close" onclick="closeModal()">&times;</span>
			<div id="challenge-details"></div>
		</div>
	</div>
</div>
<!------------------------------------------------->
<div id="scoreboard" class="section" style="display: none;">
	<h1>This Week's Featured Challenges</h1>
	<p>Weekly scores reset every Thursday Afternoon.</p>
	<table class="table-score">
	<thead><tr><th>Rank</th><th>Name</th><th>Description</th><th>Score</th></tr></thead>
	<div id="scores-weekly"></div>
	</table>
	<h1>All Challenges</h1>
	<table class="table-score" cellspacing="0" cellpadding="8" >
	<thead><tr><th>Rank</th><th>Name</th><th>Description</th><th>Score</th></tr></thead>
	<div id="scores-all"></div>
	</table>
</div>
<!------------------------------------------------->
<script>
function showSection(idToShow) {
	const sections = ['noticeboard', 'challenges', 'scoreboard'];
	sections.forEach(id => {
	const section = document.getElementById(id);
	if (section) {
		section.style.display = id === idToShow ? 'block' : 'none';
	}
  });
}
function openModal() {
	document.getElementById("challenge-modal").style.display = "block";
}
function closeModal() {
	document.getElementById("challenge-modal").style.display = "none";
}
// Close modal on background click
window.onclick = function(event) {
	const modal = document.getElementById("challenge-modal");
	if (event.target === modal) {
		closeModal();
	}
}
</script>